<!DOCTYPE html>
<html style="display: none;" lang="en">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">



    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>












    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Notes, 大型网站技术架构 | 
        
        TaoSama&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="OverviewEvolution of Large Site ArchitectureCharacteristics
high concurrency, huge traffic
high availability
vast data
users from everywhere, complex situation of network
bad environment of security 
quick demands changing, frequently releasing
progessive development
">
    <meta name="keywords" content="Algorithm, ACMer">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.en.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.proxy.ustclug.org/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="TaoSama&#39;s Blog">
    <meta name="msapplication-starturl" content="http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="TaoSama&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    
        
            <link rel=alternate type="application/atom+xml" href="atom.xml">
        
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Notes, 大型网站技术架构 | TaoSama&#39;s Blog">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="OverviewEvolution of Large Site ArchitectureCharacteristics
high concurrency, huge traffic
high availability
vast data
users from everywhere, complex situation of network
bad environment of security 
quick demands changing, frequently releasing
progessive development
">
    

    
        <meta property="article:published_time" content="Fri Oct 27 2017 11:52:10 GMT+0800">
        <meta property="article:modified_time" content="Sat Jan 27 2018 18:44:15 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/index.html",
    "headline": "Notes, 大型网站技术架构",
    "datePublished": "Fri Oct 27 2017 11:52:10 GMT+0800",
    "dateModified": "Sat Jan 27 2018 18:44:15 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "TaoSama",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "Forward and Never Step Back"
    },
    "publisher": {
        "@type": "Organization",
        "name": "TaoSama&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": "Algorithm, ACMer",
    "description": "OverviewEvolution of Large Site ArchitectureCharacteristics
high concurrency, huge traffic
high availability
vast data
users from everywhere, complex situation of network
bad environment of security 
quick demands changing, frequently releasing
progessive development
",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Overview"><span class="post-toc-number">1.</span> <span class="post-toc-text">Overview</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Evolution-of-Large-Site-Architecture"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Evolution of Large Site Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Characteristics"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">Characteristics</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Development-Progress"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">Development Progress</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Values"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">Values</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Wrong-Thinking"><span class="post-toc-number">1.1.4.</span> <span class="post-toc-text">Wrong Thinking</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Models-of-Large-Site-Architecture"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">Models of Large Site Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Layer-horizontal"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">Layer (horizontal)</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Split-vertical"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">Split (vertical)</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Distributed"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">Distributed</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Cluster"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">Cluster</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Cache"><span class="post-toc-number">1.2.5.</span> <span class="post-toc-text">Cache</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Asynchronization"><span class="post-toc-number">1.2.6.</span> <span class="post-toc-text">Asynchronization</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Redundancy"><span class="post-toc-number">1.2.7.</span> <span class="post-toc-text">Redundancy</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Automation"><span class="post-toc-number">1.2.8.</span> <span class="post-toc-text">Automation</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Security"><span class="post-toc-number">1.2.9.</span> <span class="post-toc-text">Security</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Architecture-Model-of-Weibo"><span class="post-toc-number">1.2.10.</span> <span class="post-toc-text">Architecture Model of Weibo</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Keys-of-Large-Site-Architecture"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">Keys of Large Site Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Performance"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">Performance</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Availability"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">Availability</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Scalability"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">Scalability</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Extensibility"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">Extensibility</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Security-1"><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">Security</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Architecture"><span class="post-toc-number">2.</span> <span class="post-toc-text">Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#High-performance-Architecture"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">High-performance Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Different-Views-of-Website-Performance"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">Different Views of Website Performance</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Metrics-of-Performance"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">Metrics of Performance</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Ways-of-Profiling"><span class="post-toc-number">2.1.3.</span> <span class="post-toc-text">Ways of Profiling</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Strategy-of-Performance-Optimization"><span class="post-toc-number">2.1.4.</span> <span class="post-toc-text">Strategy of Performance Optimization</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Web-Front-Performance-Optimization"><span class="post-toc-number">2.1.5.</span> <span class="post-toc-text">Web Front Performance Optimization</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Application-Server-Performance-Optimization"><span class="post-toc-number">2.1.6.</span> <span class="post-toc-text">Application Server Performance Optimization</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#High-availability-Architecture"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">High-availability Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Layered-Architecture"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">Layered Architecture</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#High-availability-Application"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">High-availability Application</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#High-availability-Service"><span class="post-toc-number">2.2.3.</span> <span class="post-toc-text">High-availability Service</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#High-availability-Data"><span class="post-toc-number">2.2.4.</span> <span class="post-toc-text">High-availability Data</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#CAP-Principe"><span class="post-toc-number">2.2.5.</span> <span class="post-toc-text">CAP Principe</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Data-Backup"><span class="post-toc-number">2.2.6.</span> <span class="post-toc-text">Data Backup</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Failure-Transferring"><span class="post-toc-number">2.2.7.</span> <span class="post-toc-text">Failure Transferring</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Quality-Insurance"><span class="post-toc-number">2.2.8.</span> <span class="post-toc-text">Quality Insurance</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#High-scalability-Architecture"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">High-scalability Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Physical-Separation"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">Physical Separation</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Load-Balancing"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">Load Balancing</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Distributed-Cache"><span class="post-toc-number">2.3.3.</span> <span class="post-toc-text">Distributed Cache</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Distributed-Database"><span class="post-toc-number">2.3.4.</span> <span class="post-toc-text">Distributed Database</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#High-extensibility-Architecture"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">High-extensibility Architecture</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Security-Architecture"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">Security Architecture</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Website-attack-and-defense"><span class="post-toc-number">2.5.1.</span> <span class="post-toc-text">Website attack and defense</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Encryption-and-Key-Security-Management"><span class="post-toc-number">2.5.2.</span> <span class="post-toc-text">Encryption and Key Security Management</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Infomation-filtering-and-Anti-spam"><span class="post-toc-number">2.5.3.</span> <span class="post-toc-text">Infomation filtering and Anti-spam</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Risk-Control"><span class="post-toc-number">2.5.4.</span> <span class="post-toc-text">Risk Control</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Cases"><span class="post-toc-number">3.</span> <span class="post-toc-text">Cases</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Taobao"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Taobao</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Wikipedia"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Wikipedia</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Doris-enormous-distributed-KV-storage"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">Doris (enormous distributed KV storage)</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Seckilling-System"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">Seckilling System</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#chanllenge"><span class="post-toc-number">3.4.1.</span> <span class="post-toc-text">chanllenge</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#solution"><span class="post-toc-number">3.4.2.</span> <span class="post-toc-text">solution</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#architecture"><span class="post-toc-number">3.4.3.</span> <span class="post-toc-text">architecture</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Failure-Analysis"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">Failure Analysis</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#disk-space-increases-surprisingly"><span class="post-toc-number">3.5.1.</span> <span class="post-toc-text">disk space increases surprisingly</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#high-load-of-database"><span class="post-toc-number">3.5.2.</span> <span class="post-toc-text">high load of database</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#timeout-failure-in-high-concurrency"><span class="post-toc-number">3.5.3.</span> <span class="post-toc-text">timeout failure in high concurrency</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#high-load-of-database-caused-by-cache"><span class="post-toc-number">3.5.4.</span> <span class="post-toc-text">high load of database caused by cache</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#application-start-out-of-synchronization"><span class="post-toc-number">3.5.5.</span> <span class="post-toc-text">application start out of synchronization</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#big-files-occupy-the-disk-IO"><span class="post-toc-number">3.5.6.</span> <span class="post-toc-text">big files occupy the disk IO</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#abuse-of-releasing-environments"><span class="post-toc-number">3.5.7.</span> <span class="post-toc-text">abuse of releasing environments</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#non-standard-releasing-procedure"><span class="post-toc-number">3.5.8.</span> <span class="post-toc-text">non-standard releasing procedure</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#bad-programming-habits"><span class="post-toc-number">3.5.9.</span> <span class="post-toc-text">bad programming habits</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Postscript"><span class="post-toc-number">4.</span> <span class="post-toc-text">Postscript</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Notes, 大型网站技术架构
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>TaoSama</strong>
        <span>Oct 27, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;Views
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Notes, 大型网站技术架构&url=http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/index.html&pic=http://TaoSama.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                Share to Weibo
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Notes, 大型网站技术架构&url=http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/index.html&via=TaoSama" target="_blank">
            <li class="mdl-menu__item">
                Share to Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/index.html" target="_blank">
            <li class="mdl-menu__item">
                Share to Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/index.html" target="_blank">
            <li class="mdl-menu__item">
                Share to Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><h4 id="Evolution-of-Large-Site-Architecture"><a href="#Evolution-of-Large-Site-Architecture" class="headerlink" title="Evolution of Large Site Architecture"></a>Evolution of Large Site Architecture</h4><h5 id="Characteristics"><a href="#Characteristics" class="headerlink" title="Characteristics"></a>Characteristics</h5><ul>
<li>high concurrency, huge traffic</li>
<li>high availability</li>
<li>vast data</li>
<li>users from everywhere, complex situation of network</li>
<li>bad environment of security </li>
<li>quick demands changing, frequently releasing</li>
<li>progessive development</li>
</ul>
<a id="more"></a>
<h5 id="Development-Progress"><a href="#Development-Progress" class="headerlink" title="Development Progress"></a>Development Progress</h5><ul>
<li>begin<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-27/47885692.jpg" alt=""></li>
<li>separate application and data service</li>
<li>use cache</li>
<li>use application cluster</li>
<li>separate read and write of database</li>
<li>use reverse proxy and CDN<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/44949985.jpg" alt=""></li>
<li>use distributed file system and distributed database</li>
<li>use NoSQL and search engine<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/8148745.jpg" alt=""></li>
<li>separate bussiness</li>
<li>use distributed services<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/62668186.jpg" alt=""></li>
</ul>
<h5 id="Values"><a href="#Values" class="headerlink" title="Values"></a>Values</h5><ul>
<li>key is to be flexible to the bussiness</li>
<li>major pusher is bussiness developing</li>
</ul>
<h5 id="Wrong-Thinking"><a href="#Wrong-Thinking" class="headerlink" title="Wrong Thinking"></a>Wrong Thinking</h5><ul>
<li>follow solutions of the gaints blindly</li>
<li>be technical just for techniques</li>
<li>try to solve all problems with techniques</li>
</ul>
<h4 id="Models-of-Large-Site-Architecture"><a href="#Models-of-Large-Site-Architecture" class="headerlink" title="Models of Large Site Architecture"></a>Models of Large Site Architecture</h4><h5 id="Layer-horizontal"><a href="#Layer-horizontal" class="headerlink" title="Layer (horizontal)"></a>Layer (horizontal)</h5><ul>
<li>application layer: be responsible for specific bussiness and view showing (view, bussiness logic)</li>
<li>service layer: provide service for application layer (data interfaces, logic processing)</li>
<li>data layer: provide service data accessing and storage</li>
</ul>
<h5 id="Split-vertical"><a href="#Split-vertical" class="headerlink" title="Split (vertical)"></a>Split (vertical)</h5><p>split different functionalites and services into aggregated and decoupled modules.</p>
<h5 id="Distributed"><a href="#Distributed" class="headerlink" title="Distributed"></a>Distributed</h5><p>distributedly deploy the layered and splitted modules in different servers.</p>
<ul>
<li>distributed applications and services</li>
<li>distributed static resources</li>
<li>distributed data and storage</li>
<li>distributed computing</li>
<li>distributed configuration</li>
<li>distributed lock</li>
<li>distributed file system</li>
</ul>
<h5 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h5><p>cluster the independent deployed server, i.e., many servers deployed the same application consists of a cluster.</p>
<h5 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h5><ul>
<li>CDN</li>
<li>reverse proxy</li>
<li>local cache in application server</li>
<li>distributed cache</li>
</ul>
<h5 id="Asynchronization"><a href="#Asynchronization" class="headerlink" title="Asynchronization"></a>Asynchronization</h5><p><strong>distributed message queue</strong>, is a typical producer-consumer model</p>
<ul>
<li>improve system availability</li>
<li>speed up the response of website</li>
<li>reduce the peek of concurrent accessing</li>
</ul>
<h5 id="Redundancy"><a href="#Redundancy" class="headerlink" title="Redundancy"></a>Redundancy</h5><ul>
<li>cold backup: storage archived in fixed period</li>
<li>hot backup: separate read and write of database, real-time synchronization</li>
<li>disaster recovery data center</li>
</ul>
<h5 id="Automation"><a href="#Automation" class="headerlink" title="Automation"></a>Automation</h5><ul>
<li><p>automatic releasing</p>
<ul>
<li>automatic source control</li>
<li>automatic testing</li>
<li>automatic security dection</li>
<li>automatic deployment</li>
</ul>
</li>
<li><p>automatic monitoring</p>
</li>
<li>automatic alerting</li>
<li>automatic failure transferring</li>
<li>automatic failure recoverring</li>
<li>automatic downgrading</li>
<li>automatic resource allocating</li>
</ul>
<h5 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h5><ul>
<li>password</li>
<li>verification code</li>
<li>encryption</li>
<li>filtering</li>
<li>risk control</li>
</ul>
<h5 id="Architecture-Model-of-Weibo"><a href="#Architecture-Model-of-Weibo" class="headerlink" title="Architecture Model of Weibo"></a>Architecture Model of Weibo</h5><p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/87294532.jpg" alt=""></p>
<h4 id="Keys-of-Large-Site-Architecture"><a href="#Keys-of-Large-Site-Architecture" class="headerlink" title="Keys of Large Site Architecture"></a>Keys of Large Site Architecture</h4><h5 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h5><ul>
<li>response time </li>
<li>throughput</li>
<li>system performance monitor (top)</li>
</ul>
<p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/24638084.jpg" alt=""></p>
<h5 id="Availability"><a href="#Availability" class="headerlink" title="Availability"></a>Availability</h5><ul>
<li>available time (99.99%)</li>
<li>redundancy</li>
<li>pre-released verification</li>
<li>gray releasing</li>
</ul>
<h5 id="Scalability"><a href="#Scalability" class="headerlink" title="Scalability"></a>Scalability</h5><p>easy to add and remove servers in cluster</p>
<h5 id="Extensibility"><a href="#Extensibility" class="headerlink" title="Extensibility"></a>Extensibility</h5><ul>
<li>event driven architecture</li>
<li>distributed service</li>
</ul>
<h5 id="Security-1"><a href="#Security-1" class="headerlink" title="Security"></a>Security</h5><h3 id="Architecture"><a href="#Architecture" class="headerlink" title="Architecture"></a>Architecture</h3><h4 id="High-performance-Architecture"><a href="#High-performance-Architecture" class="headerlink" title="High-performance Architecture"></a>High-performance Architecture</h4><h5 id="Different-Views-of-Website-Performance"><a href="#Different-Views-of-Website-Performance" class="headerlink" title="Different Views of Website Performance"></a>Different Views of Website Performance</h5><ul>
<li><p>user<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/62774698.jpg" alt=""></p>
</li>
<li><p>developer<br>the performance of application itself and relevant subsystem.<br>response latency, system throughput, concurrency, and system stability</p>
</li>
<li><p>maintainer<br>infrastructure performance, resource utilization</p>
</li>
</ul>
<h5 id="Metrics-of-Performance"><a href="#Metrics-of-Performance" class="headerlink" title="Metrics of Performance"></a>Metrics of Performance</h5><ul>
<li><p>response time<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/34403316.jpg" alt=""></p>
</li>
<li><p>number of concurrency<br>number of total users &gt;&gt; number of online users &gt;&gt; number of concurrent users</p>
</li>
<li><p>throughput<br>TPS(transaction per second), QPS(query per second), HPS(HTTP request per second)</p>
</li>
<li><p>system performance monitor (top)<br>system load, number of objects and threads, memory and CPU used, disk and netword I/O<br>top: there floating number, recent 1min, 10mins, 15mins average running processes<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/42727590.jpg" alt=""></p>
</li>
</ul>
<h5 id="Ways-of-Profiling"><a href="#Ways-of-Profiling" class="headerlink" title="Ways of Profiling"></a>Ways of Profiling</h5><ul>
<li>performance testing</li>
<li>load testing</li>
<li>stress testing</li>
<li>stability testing</li>
</ul>
<p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/43135395.jpg" alt=""></p>
<p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/85052370.jpg" alt=""></p>
<ul>
<li>performance report<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/25395924.jpg" alt=""></li>
</ul>
<h5 id="Strategy-of-Performance-Optimization"><a href="#Strategy-of-Performance-Optimization" class="headerlink" title="Strategy of Performance Optimization"></a>Strategy of Performance Optimization</h5><ul>
<li>performance analysis</li>
<li>performance optimization</li>
</ul>
<h5 id="Web-Front-Performance-Optimization"><a href="#Web-Front-Performance-Optimization" class="headerlink" title="Web Front Performance Optimization"></a>Web Front Performance Optimization</h5><ul>
<li><p>browser</p>
<ul>
<li>reduce the number of HTTP requests</li>
<li>browser cache</li>
<li>enable compression</li>
<li>put CSS at the front of page, and JS at the bottom</li>
<li>reduce the transferring of Cookie</li>
</ul>
</li>
<li><p>CDN (Content Distribute Network)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/71736041.jpg" alt=""></p>
</li>
<li><p>reverse proxy<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/43823166.jpg" alt=""></p>
</li>
</ul>
<h5 id="Application-Server-Performance-Optimization"><a href="#Application-Server-Performance-Optimization" class="headerlink" title="Application Server Performance Optimization"></a>Application Server Performance Optimization</h5><p><strong>distributed cache</strong></p>
<ul>
<li><p>cache principle (80%-20% law)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/43534320.jpg" alt=""></p>
</li>
<li><p>use cache properly</p>
<ul>
<li>infrequently modified (read:write ≥ 2:1)</li>
<li>hot piece</li>
<li>set expired time</li>
</ul>
</li>
<li><p>cache availability</p>
<ul>
<li>cache warm up<br>preload the hot pieces</li>
<li>cache penetrating<br>situation that requires to nonexistent data in high concurrency, one way is to cache it (nonexistent-null)</li>
</ul>
</li>
</ul>
<p><strong>architecture of distributed cache</strong></p>
<p>JBoss Cache: update synchronously (enterprise use)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/55001392.jpg" alt=""></p>
<p>Memcached: no communication between servers<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/4636924.jpg" alt=""></p>
<ul>
<li><p>communication protocol: TCP, UDP, HTTP<br>communication serializating protocol: text(XML, JSON), binary(Google Protobuffer)</p>
</li>
<li><p>memcached use TCP for communication protocol, and it defines its own text serializating protocol.</p>
</li>
<li><p>memcached’s server communication module is based on <code>Libevent</code>.</p>
</li>
<li><p>memory management</p>
<ul>
<li>chunk-based allocation<br>find a minimal chunk that can save the data</li>
<li>LRU<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/21995999.jpg" alt=""></li>
</ul>
</li>
</ul>
<p><strong>asynchronizaton</strong><br>use message queue to reduce the peek<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/94302977.jpg" alt=""></p>
<p><strong>cluster</strong></p>
<p><strong>code optimization</strong></p>
<ul>
<li>multi-thread<br>number of threads = $\frac{task execution time}{task execution time-IO waiting time}\times CPU cores$</li>
<li>thread-safe<br>stateless object, local object, lock</li>
<li>resource reusing<br>singleton, object pool</li>
<li>data structure<br>hashtable: originlal-<code>MD5</code>-&gt;info figureprint-<code>HASH</code>-&gt;hashcode</li>
<li>garbage collection<br>object created in Eden-<code>Young GC</code>-&gt;From-<code>Young GC</code>-&gt;To-<code>Young GC</code>-&gt;From-…<code>threshold times Young GC</code>-&gt;Old-&gt;<code>Full GC</code><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/70621950.jpg" alt=""></li>
</ul>
<p><strong>storage performance optimization</strong></p>
<ul>
<li>mechanical hard disk vs. solid state hard drive</li>
<li><p>B+ tree vs. LSM tree<br>N-branch search tree: at most 3 level, (maybe 5 disk IOs to update, 3 to get the index, 1 to read, 1 to write)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/64739055.jpg" alt=""><br>N-level mergeable search tree: write operations do in memory, and create a new record in the $C_0$ tree<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/65052291.jpg" alt=""></p>
</li>
<li><p>RAID vs. HDFS<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/86796256.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/41423906.jpg" alt=""></p>
</li>
</ul>
<h4 id="High-availability-Architecture"><a href="#High-availability-Architecture" class="headerlink" title="High-availability Architecture"></a>High-availability Architecture</h4><h5 id="Layered-Architecture"><a href="#Layered-Architecture" class="headerlink" title="Layered Architecture"></a>Layered Architecture</h5><p>application layer &lt;- service layer &lt;- data layer<br>more complicated:<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/25459489.jpg" alt=""></p>
<h5 id="High-availability-Application"><a href="#High-availability-Application" class="headerlink" title="High-availability Application"></a>High-availability Application</h5><ul>
<li>failure transferring through load balancing</li>
<li>session managemant<br>a session is a semi-permanent interactive information interchange, i.e., a dialogue<ul>
<li>session copy</li>
<li>session binding</li>
<li>use cookie to record session</li>
<li>session server<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/80821252.jpg" alt=""></li>
</ul>
</li>
</ul>
<h5 id="High-availability-Service"><a href="#High-availability-Service" class="headerlink" title="High-availability Service"></a>High-availability Service</h5><ul>
<li>managed in priority</li>
<li>time-out setting</li>
<li>asynchronous call</li>
<li>downgrade-abled service</li>
<li>idempotent design<br>i.e., repeated call can be handled properly.</li>
</ul>
<h5 id="High-availability-Data"><a href="#High-availability-Data" class="headerlink" title="High-availability Data"></a>High-availability Data</h5><h5 id="CAP-Principe"><a href="#CAP-Principe" class="headerlink" title="CAP Principe"></a>CAP Principe</h5><ul>
<li>consistency</li>
<li>availablity</li>
<li>partition tolerance<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/10107207.jpg" alt=""></li>
</ul>
<p><strong>consistency</strong></p>
<ul>
<li>data strong consistency<br>data is always consistent in all the physical copies</li>
<li>data user consistency<br>data may be not consistent in all the physical copies, but it<br>can be accessed as a consistent and right one for user through<br>error correction and verification.</li>
<li>data final consistency<br>data may be not consistent in all the physical copies, and it<br>may be not accessed consistently. but after some time, it can be<br>corrected to user consistency.</li>
</ul>
<h5 id="Data-Backup"><a href="#Data-Backup" class="headerlink" title="Data Backup"></a>Data Backup</h5><h5 id="Failure-Transferring"><a href="#Failure-Transferring" class="headerlink" title="Failure Transferring"></a>Failure Transferring</h5><ul>
<li>failure confirmation<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/56937621.jpg" alt=""></li>
<li>access transferring</li>
<li>data recovering</li>
</ul>
<h5 id="Quality-Insurance"><a href="#Quality-Insurance" class="headerlink" title="Quality Insurance"></a>Quality Insurance</h5><p><strong>automatic releasing</strong><br>(gray releasing)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/67465635.jpg" alt=""></p>
<p><strong>automatic testing</strong></p>
<p><strong>pre-releasing verification</strong></p>
<p><strong>source control</strong></p>
<ul>
<li>master developing, branch releasing</li>
<li>master releasing, branch developing</li>
</ul>
<p><strong>website monitoring</strong></p>
<ul>
<li>user behavior log collection<br>tools based on <code>Storm</code> (real-time computing framework)</li>
<li>server performance monitoring</li>
<li>running data report</li>
</ul>
<p><strong>website monitoring control</strong></p>
<ul>
<li>system alerting</li>
<li>failure transferring</li>
<li>automatic downgrading</li>
</ul>
<h4 id="High-scalability-Architecture"><a href="#High-scalability-Architecture" class="headerlink" title="High-scalability Architecture"></a>High-scalability Architecture</h4><h5 id="Physical-Separation"><a href="#Physical-Separation" class="headerlink" title="Physical Separation"></a>Physical Separation</h5><p>（clustering)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/61171750.jpg" alt=""></p>
<h5 id="Load-Balancing"><a href="#Load-Balancing" class="headerlink" title="Load Balancing"></a>Load Balancing</h5><ul>
<li>HTTP redirection protocol</li>
<li>DNS (domain name resolution)</li>
<li>reverse proxy</li>
<li>IP<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/91517327.jpg" alt=""></li>
<li>data link layer<br>LVS (Linux Virtual Server)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/85037154.jpg" alt=""></li>
</ul>
<p><strong>load balancing algorithms</strong></p>
<ul>
<li>round robin</li>
<li>weighted round robin</li>
<li>random</li>
<li>least connections</li>
<li>source hashing</li>
</ul>
<h5 id="Distributed-Cache"><a href="#Distributed-Cache" class="headerlink" title="Distributed Cache"></a>Distributed Cache</h5><p><strong>memchached access model</strong><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/40831863.jpg" alt=""></p>
<p>consistent hashing<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/34276778.jpg" alt=""></p>
<p>to solve the influence of cache load =&gt; <code>virtual nodes</code> (a server to 150 nodes)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/28184219.jpg" alt=""></p>
<h5 id="Distributed-Database"><a href="#Distributed-Database" class="headerlink" title="Distributed Database"></a>Distributed Database</h5><p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/59890444.jpg" alt=""></p>
<p><strong>spread tables into different database servers</strong><br><strong>put table into slices, then spread into different database servers</strong></p>
<p>database products of data slices: Amoeba, Cobar </p>
<p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/80126287.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/18332945.jpg" alt=""></p>
<p><strong>NoSQL</strong></p>
<ul>
<li><p>abandon 2 basis of relation database:<br>SQL based on relation algebra,<br>and transaction consistency guarantee [atomicity, consistency, isolation, durability] (ACID)</p>
</li>
<li><p>strengthen characteristics that large site concerned:<br>high-availability, high-scalability</p>
</li>
</ul>
<p><strong>Apache HBase</strong></p>
<p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/98641792.jpg" alt=""></p>
<p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/23962985.jpg" alt=""></p>
<h4 id="High-extensibility-Architecture"><a href="#High-extensibility-Architecture" class="headerlink" title="High-extensibility Architecture"></a>High-extensibility Architecture</h4><ul>
<li>event driven architecture<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/9652231.jpg" alt=""></li>
<li>distributed message queue<br>Apache ActiveMQ<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/81090792.jpg" alt=""></li>
<li><p>distributed services</p>
</li>
<li><p>web service and enterprise distributed service<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/51015171.jpg" alt=""></p>
</li>
<li><p>distributed service framework<br>large site need simple and efficient distributed service<br>framework to build its service oriented architecture (SOA)<br>it is said that Facebook manages its distributed service based on<br><code>Thrift</code> (an opensource remote service call framework)<br><code>Alibaba-Dubbo</code><br> <img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/67509941.jpg" alt=""></p>
</li>
<li><p>extensible data structure<br>NoSQL <code>ColumnFamily</code> (first in Google Bigtable)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/13082779.jpg" alt=""></p>
</li>
<li><p>open platform to build website ecosystem<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/78200842.jpg" alt=""></p>
</li>
</ul>
<h4 id="Security-Architecture"><a href="#Security-Architecture" class="headerlink" title="Security Architecture"></a>Security Architecture</h4><h5 id="Website-attack-and-defense"><a href="#Website-attack-and-defense" class="headerlink" title="Website attack and defense"></a>Website attack and defense</h5><p><strong>XSS(Cross Site Script) attack</strong></p>
<ul>
<li><p>reflective type<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/41046481.jpg" alt=""></p>
</li>
<li><p>persistent type<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/42341545.jpg" alt=""></p>
</li>
<li><p>solution: filter, HttpOnly</p>
</li>
</ul>
<p><strong>Injection attack</strong><br>SQL injection, OS injection</p>
<p>SQL injection: open source(table name is public), error echoed, blind injection<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/12246870.jpg" alt=""></p>
<p>solution: filter, parameter binding</p>
<p><strong>CSRF(Cross Site Request Forgety) attack</strong><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-29/93927561.jpg" alt=""></p>
<p>solution: form token, verification code, referer check</p>
<p><strong>other attack</strong></p>
<ul>
<li>error echoed</li>
<li>HTML comment</li>
<li>file uploading</li>
<li>path traversal</li>
</ul>
<p><strong>web application firewall</strong><br>ModSecurity<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/97390520.jpg" alt=""></p>
<p><strong> website security scanning</strong></p>
<h5 id="Encryption-and-Key-Security-Management"><a href="#Encryption-and-Key-Security-Management" class="headerlink" title="Encryption and Key Security Management"></a>Encryption and Key Security Management</h5><ul>
<li><p>one-way hashing encryption<br>MD5, SHA<br>Rainbow Table to try to decrypt MD5<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/70087109.jpg" alt=""></p>
</li>
<li><p>symmetric encryption<br>DES, RC<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/72859252.jpg" alt=""></p>
</li>
<li><p>asymmetric encryption<br>RSA<br>information security transmission, digital signature<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/51192903.jpg" alt=""></p>
</li>
<li><p>key security management<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/44940270.jpg" alt=""></p>
</li>
</ul>
<h5 id="Infomation-filtering-and-Anti-spam"><a href="#Infomation-filtering-and-Anti-spam" class="headerlink" title="Infomation filtering and Anti-spam"></a>Infomation filtering and Anti-spam</h5><ul>
<li><p>text matching<br>double array trie, multi-level hashtable (simpler)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/84675517.jpg" alt=""></p>
</li>
<li><p>classification algorithm<br>Native Bayes, TAN, Association Rule Clustering System (ARCS)<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/24237709.jpg" alt=""></p>
</li>
<li><p>blacklist<br>hashtable, bloomfilter<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/32301588.jpg" alt=""></p>
</li>
</ul>
<h5 id="Risk-Control"><a href="#Risk-Control" class="headerlink" title="Risk Control"></a>Risk Control</h5><ul>
<li>rule engine<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/25087873.jpg" alt=""></li>
<li>statistics model<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/76287040.jpg" alt=""></li>
</ul>
<h3 id="Cases"><a href="#Cases" class="headerlink" title="Cases"></a>Cases</h3><h4 id="Taobao"><a href="#Taobao" class="headerlink" title="Taobao"></a>Taobao</h4><p>At first, Ma Yun bought a <code>C2C</code> website, then <code>LAMP</code>:<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/37599252.jpg" alt=""></p>
<p>MVC: decouple view and bussiness logic<br>ORM (Object-relational mapping): decouple objects and relational database</p>
<p>Taobao didn’t use the hot <code>Struts</code> and <code>Hibernate</code>,<br>but choose to develop its own MVC frameword <code>Webx</code>, and to use <code>IBatis</code> for ORM.<br>Taobao also used <code>Weblogic</code> for application server, <code>Oracle</code> for database. They are commercial softwares.<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/959871.jpg" alt=""></p>
<p>Then, to use <code>Spring</code> instead of <code>EJB</code>, free <code>JBoss</code> instead of <code>Weblogic</code></p>
<p>At last, abandon <code>Oracle</code>, <code>IBM</code>, <code>EMC</code>, and back to open source <code>MySQL</code> and <code>NoSQL</code><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/56259159.jpg" alt=""></p>
<h4 id="Wikipedia"><a href="#Wikipedia" class="headerlink" title="Wikipedia"></a>Wikipedia</h4><p><strong>based on</strong> <code>LAMP</code><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/95474191.jpg" alt=""></p>
<p><strong>Wikipedia’s web front</strong><br>the key architecture of  is <code>Squid</code> cluster:<br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/95191711.jpg" alt=""></p>
<p><strong>Wikipedia’s backend</strong></p>
<ul>
<li>cache the format that application can be used directly</li>
<li>cache servers store the session objects</li>
<li>memcached’s connection is cheap, and create one when needed</li>
<li>increase memory to improve <code>MySQL</code></li>
<li>use <code>RAIO0</code> to speed up disk accessing</li>
<li>set ACID of database at a some low level</li>
<li>if <code>Master</code> database sever crashed, switch to <code>Slave</code>,<br>the close the write service, i.e., close the edition of users.</li>
</ul>
<h4 id="Doris-enormous-distributed-KV-storage"><a href="#Doris-enormous-distributed-KV-storage" class="headerlink" title="Doris (enormous distributed KV storage)"></a>Doris (enormous distributed KV storage)</h4><p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/90549351.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/91551116.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/33182040.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/47667517.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/2416629.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/96568966.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/15742744.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/91008989.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/14212433.jpg" alt=""></p>
<h4 id="Seckilling-System"><a href="#Seckilling-System" class="headerlink" title="Seckilling System"></a>Seckilling System</h4><h5 id="chanllenge"><a href="#chanllenge" class="headerlink" title="chanllenge"></a>chanllenge</h5><ul>
<li>strike for the current bussiness</li>
<li>high load of high concurrency</li>
<li>increasing bandwidth</li>
<li>the URL to place an order</li>
</ul>
<h5 id="solution"><a href="#solution" class="headerlink" title="solution"></a>solution</h5><ul>
<li>independently deploy seckilling system</li>
<li>static page for seckilling product</li>
<li>rent netword bandwidth for seckilling</li>
<li>dynamically generate random URL for placing order</li>
</ul>
<h5 id="architecture"><a href="#architecture" class="headerlink" title="architecture"></a>architecture</h5><p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/33308473.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/54626461.jpg" alt=""><br><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/87372762.jpg" alt=""></p>
<h4 id="Failure-Analysis"><a href="#Failure-Analysis" class="headerlink" title="Failure Analysis"></a>Failure Analysis</h4><h5 id="disk-space-increases-surprisingly"><a href="#disk-space-increases-surprisingly" class="headerlink" title="disk space increases surprisingly"></a>disk space increases surprisingly</h5><p>set log level to <code>DEBUG</code> by mistake.</p>
<h5 id="high-load-of-database"><a href="#high-load-of-database" class="headerlink" title="high load of database"></a>high load of database</h5><p>a SQL executes in the index page.</p>
<h5 id="timeout-failure-in-high-concurrency"><a href="#timeout-failure-in-high-concurrency" class="headerlink" title="timeout failure in high concurrency"></a>timeout failure in high concurrency</h5><p>a singleton object need the unique lock to execute for a long time.</p>
<h5 id="high-load-of-database-caused-by-cache"><a href="#high-load-of-database-caused-by-cache" class="headerlink" title="high load of database caused by cache"></a>high load of database caused by cache</h5><p>close the cache servers when releasing.</p>
<h5 id="application-start-out-of-synchronization"><a href="#application-start-out-of-synchronization" class="headerlink" title="application start out of synchronization"></a>application start out of synchronization</h5><p>Apache and JBoss start at the same time.<br>JBoss first, and <code>curl</code> to validate, then Apache.</p>
<h5 id="big-files-occupy-the-disk-IO"><a href="#big-files-occupy-the-disk-IO" class="headerlink" title="big files occupy the disk IO"></a>big files occupy the disk IO</h5><p>separate different sizes or types of files.</p>
<h5 id="abuse-of-releasing-environments"><a href="#abuse-of-releasing-environments" class="headerlink" title="abuse of releasing environments"></a>abuse of releasing environments</h5><p>someone did performance testing in releasing environments.</p>
<h5 id="non-standard-releasing-procedure"><a href="#non-standard-releasing-procedure" class="headerlink" title="non-standard releasing procedure"></a>non-standard releasing procedure</h5><p>forget to uncomment some codes.<br><strong>commit after diff checking</strong>.</p>
<h5 id="bad-programming-habits"><a href="#bad-programming-habits" class="headerlink" title="bad programming habits"></a>bad programming habits</h5><p><code>NullPointerException</code> throws.<br>forget to check whether the object is <code>null</code>.</p>
<h3 id="Postscript"><a href="#Postscript" class="headerlink" title="Postscript"></a>Postscript</h3><p><img src="http://7xru22.com1.z0.glb.clouddn.com/17-10-30/1691765.jpg" alt=""></p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #757575;
            text-shadow: 0;
            display: none
        }
</style>
	
<div class="btn_click_load"> 
    <button class="disqus_click_btn">Read Comments (Make sure disq.us, disquscdn.com and disqus.com can load properly)</button>
</div>

<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://TaoSama.github.io/2017/10/27/large-site-architecture-notes/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/ls-javascript" id="disqus-lazy-load-script">
    $.ajax({
        url: 'https://disqus.com/next/config.json',
        timeout: 4000,
        type: 'GET',
        success: (function() {
            var d = document;
            var s = d.createElement('script');
            s.src = '//taosamaw.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
            $('.disqus_click_btn').css('display','none');
        })(),
        error: function() {
          $('.disqus_click_btn').css('display','block');
        }
    });
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//taosamaw.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.disqus_click_btn').css('display','none');
    });
</script>
  	

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2018/03/09/springboot-guide-notes/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Newer
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/10/17/effective-cpp-miscellany-and-summary/" id="post_nav-older" class="next-content">
            Older
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="TaoSama's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        lwt1367@qq.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:lwt1367@qq.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                Home
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    Archives
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2018/03/">March 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/10/">October 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/09/">September 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/08/">August 2017<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/07/">July 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">June 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">May 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">April 2017<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">March 2017<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">February 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/11/">November 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/09/">September 2016<span class="sidebar_archives-count">7</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/08/">August 2016<span class="sidebar_archives-count">42</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">July 2016<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/06/">June 2016<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">May 2016<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">April 2016<span class="sidebar_archives-count">41</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">March 2016<span class="sidebar_archives-count">42</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                Categories
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Doing/">Doing<span class="sidebar_archives-count">28</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Blog/">Blog<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/CPP/">CPP<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Computer-Vision/">Computer Vision<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Distributed/">Distributed<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Go/">Go<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Hive/">Hive<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Interview/">Interview<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Life/">Life<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Machine-Learning/">Machine Learning<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Python/">Python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Shell/">Shell<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/Doing/Spring/">Spring<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/">动态规划<span class="sidebar_archives-count">27</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/bitset优化/">bitset优化<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/数位dp/">数位dp<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/数据结构优化/">数据结构优化<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/斜率优化/">斜率优化<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/最长上升子序列/">最长上升子序列<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/树形dp/">树形dp<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/概率-期望dp/">概率/期望dp<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/状压dp/">状压dp<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/矩阵优化/">矩阵优化<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/动态规划/线性dp/">线性dp<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/">图论<span class="sidebar_archives-count">26</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/LCA/">LCA<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/二分图/">二分图<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/拓扑排序/">拓扑排序<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/最大团/">最大团<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/最小生成树/">最小生成树<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/最短路/">最短路<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/生成树计数/">生成树计数<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/网络流/">网络流<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/图论/连通图/">连通图<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/套题/">套题<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/字符串/">字符串<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/字符串/AC自动机/">AC自动机<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/字符串/Manacher-回文树/">Manacher/回文树<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/字符串/SA-SAM/">SA/SAM<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/小结/">小结<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/">思维<span class="sidebar_archives-count">19</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/分治/">分治<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/扫描线/">扫描线<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/数形结合/">数形结合<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/离线思想/">离线思想<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/贪心/">贪心<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/贪心/区间贪心/">区间贪心<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/思维/逆向思维/">逆向思维<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/技巧/">技巧<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/categories/技巧/two-pointers/">two pointers<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/技巧/xor/">xor<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/categories/技巧/反转问题/">反转问题<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/技巧/哈希/">哈希<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/技巧/折半搜索/">折半搜索<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/">数学<span class="sidebar_archives-count">26</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/CRT/">CRT<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/FFT-NTT-FWT/">FFT/NTT/FWT<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/博弈/">博弈<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/容斥/">容斥<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/概率-期望/">概率/期望<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/组合数学/">组合数学<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/贡献/">贡献<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/数学/高斯消元/">高斯消元<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/">数据结构<span class="sidebar_archives-count">18</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/主席树/">主席树<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/二叉搜索树/">二叉搜索树<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/可持久化Trie/">可持久化Trie<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/并查集/">并查集<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/树上莫队/">树上莫队<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/树状数组/">树状数组<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据结构/线段树/">线段树<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/">暴力<span class="sidebar_archives-count">15</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/大模拟/">大模拟<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/小模拟/">小模拟<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/搜索/">搜索<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/搜索/dfs-bfs/">dfs/bfs<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/搜索/二-三分搜索/">二/三分搜索<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/暴力/签到/">签到<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/">计算几何<span class="sidebar_archives-count">15</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/三维几何/">三维几何<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/扫描线/">扫描线<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/数值积分/">数值积分<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/旋转卡壳/">旋转卡壳<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/极角扫描/">极角扫描<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/计算几何/极角排序/">极角排序<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="About">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                About
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                Number of articles
                <span class="sidebar-badge">206</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->


<!-- Help & Support -->
<!--

    <a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.help
        <span class="mdl-button__ripple-container">
          <span class="mdl-ripple"></span>
        </span>
      </div>
    </a>

-->

<!-- Feedback -->
<!--

    <a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.feedback
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

<!-- About Theme -->
<!--

    <a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
             sidebar.about_theme
            <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/lwt1367" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/u/3863360617" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/TaoSama" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;2016&nbsp;-<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>TaoSama's Blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- 使用 DISQUS js 代码 -->






<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

    <script src="https://cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
